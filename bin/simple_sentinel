#!/usr/bin/env node

var program = require('commander');
var start   = require('../index.js').start;
var stop    = require('../index.js').stop;
var command = null;
var config_file = function() {
  if(program.config) {
    return require(require('path').resolve(program.config));
  }
};



program.usage('[start|stop]');

program.option('-f --config <path>', 'path to a configuration');

program.command('start')
       .description('start redis and sentinel')
       .action(function() {
         command = 'start';
         if(start(config_file())) {
           process.exit(1);
         }
       });

program.command('stop')
       .description('stop redis and sentinel')
       .action(function() {
         command = 'stop';
         if(stop(config_file())) {
           process.exit(1);
         }
       });

program.parse(process.argv);
if(!command) {
  program.help();
}
